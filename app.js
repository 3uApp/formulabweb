const state={lang:'ar',links:{appStore:'#',whatsapp:'https://wa.me/966500000000',email:'mailto:info@example.com'}};
const dict={ar:{"nav.features":"المزايا","nav.pricing":"الأسعار","nav.faq":"الأسئلة","nav.contact":"تواصل","cta.download":"حمّل التطبيق","cta.getApp":"جرّب التطبيق الآن","cta.learnMore":"تعرّف على المزايا","hero.title":"أقوى أداة للعطارين لصناعة العطور","hero.subtitle":"سجّل المواد، كوّن الصيغ، احسب التكاليف، وتأكد من حدود IFRA — في تطبيق واحد سريع يدعم العربية.","hero.note":"* روابط المتجر/التجربة يمكن تحديثها بسهولة من الملف app.js","features.title":"كل ما يحتاجه العطّار المحترف","features.materials.title":"قاعدة بيانات المواد","features.materials.desc":"إضافة/تصنيف المواد، موردين، CAS، تكلفة/جرام، ضغط بخار، وحدود IFRA.","features.formulas.title":"مُركب الصيغ","features.formulas.desc":"بناء أكوردات، نسب/جرامات، حساب النسب المئوية تلقائياً، وإجمالي الوزن.","features.cost.title":"حساب التكلفة","features.cost.desc":"تكلفة الزجاجة النهائية حسب الحجم والتركيز والهدر وسعر المواد.","features.ifra.title":"تحقق IFRA","features.ifra.desc":"تنبيه تلقائي عند تجاوز مواد مقيّدة بحسب الفئة والاستخدام.","features.export.title":"تصدير ونسخ احتياطي","features.export.desc":"تصدير CSV/Excel ونسخ احتياطي محلي/سحابي.","features.ui.title":"واجهة ثنائية اللغة","features.ui.desc":"دعم RTL/‏LTR، مظلم/فاتح، واختصارات لوحة المفاتيح.","quotes.q1":"“وفّر عليّ ساعات في بناء الأكوردات وتسعير الروائح.”","quotes.a1":"مصمم عطور مستقل","quotes.q2":"“أفضل أداة عربية للعطارين — دقيقة وسهلة.”","quotes.a2":"مالك ورشة عطور","pricing.title":"الأسعار","pricing.basic.title":"أساسي","pricing.basic.i1":"إدارة مواد وصيغ محدودة","pricing.basic.i2":"تصدير CSV","pricing.pro.title":"محترف","pricing.pro.i1":"غير محدود + IFRA + نسخ احتياطي","pricing.pro.i2":"دعم أولوي","pricing.cta":"ابدأ الآن","pricing.note":"* يمكن ربط الشراء بـ App Store أو Stripe على الويب.","faq.title":"الأسئلة الشائعة","faq.q1":"هل يدعم التطبيق العربية؟","faq.a1":"نعم، دعم كامل للواجهة واتجاه RTL، مع ترجمة إنجليزية.","faq.q2":"هل أستطيع تصدير الصيغ؟","faq.a2":"نعم إلى CSV/Excel، مع تفاصيل الكُلف والقيود.","faq.q3":"كيف يتم الشراء؟","faq.a3":"عبر متجر التطبيقات أو رابط دفع آمن على الويب.","contact.title":"تواصل معنا","contact.whatsapp":"واتساب مباشر","contact.email":"البريد الإلكتروني","contact.form.name":"الاسم","contact.form.email":"البريد الإلكتروني","contact.form.message":"رسالتك","contact.form.send":"إرسال","footer.privacy":"الخصوصية","footer.terms":"الشروط"},en:{"nav.features":"Features","nav.pricing":"Pricing","nav.faq":"FAQ","nav.contact":"Contact","cta.download":"Get the app","cta.getApp":"Try the app","cta.learnMore":"Learn more","hero.title":"The fastest way for perfumers to build great formulas","hero.subtitle":"Register materials, compose formulas, compute costs, and validate IFRA — in one fast, bilingual app.","hero.note":"* Store/TestFlight links can be updated in app.js","features.title":"Everything a professional perfumer needs","features.materials.title":"Materials Database","features.materials.desc":"Suppliers, CAS, cost/gram, vapor pressure, IFRA limits.","features.formulas.title":"Formula Composer","features.formulas.desc":"Accords, grams/percentages, automatic totals.","features.cost.title":"Cost Calculator","features.cost.desc":"Bottle cost by volume, concentration, wastage, and material prices.","features.ifra.title":"IFRA Check","features.ifra.desc":"Auto alerts when restricted materials exceed limits.","features.export.title":"Export & Backup","features.export.desc":"CSV/Excel export and local/cloud backups.","features.ui.title":"Bilingual UI","features.ui.desc":"RTL/LTR, dark/light, and keyboard shortcuts.","quotes.q1":"“Saved me hours pricing and building accords.”","quotes.a1":"Independent perfumer","quotes.q2":"“Best Arabic tool for perfumers — accurate and easy.”","quotes.a2":"Boutique owner","pricing.title":"Pricing","pricing.basic.title":"Basic","pricing.basic.i1":"Limited materials & formulas","pricing.basic.i2":"CSV export","pricing.pro.title":"Pro","pricing.pro.i1":"Unlimited + IFRA + backups","pricing.pro.i2":"Priority support","pricing.cta":"Start now","pricing.note":"* Purchases via App Store or Stripe on the web.","faq.title":"Frequently asked questions","faq.q1":"Does it support Arabic?","faq.a1":"Yes. Full RTL UI with English translation.","faq.q2":"Can I export formulas?","faq.a2":"Yes, to CSV/Excel with costs and constraints.","faq.q3":"How do I purchase?","faq.a3":"Via the App Store or secure web checkout.","contact.title":"Contact us","contact.whatsapp":"WhatsApp","contact.email":"Email","contact.form.name":"Name","contact.form.email":"Email","contact.form.message":"Your message","contact.form.send":"Send","footer.privacy":"Privacy","footer.terms":"Terms"}};
function applyI18n(){document.querySelectorAll('[data-i18n]').forEach(el=>{const key=el.getAttribute('data-i18n');el.textContent=dict[state.lang][key]||el.textContent;});document.documentElement.lang=state.lang;document.documentElement.dir=state.lang==='ar'?'rtl':'ltr';}
function initLinks(){document.getElementById('appStoreLink').href=state.links.appStore;document.getElementById('whatsLink').href=state.links.whatsapp;document.getElementById('mailLink').href=state.links.email;document.getElementById('ctaTop').href=state.links.appStore||'#';document.getElementById('ctaHero').href=state.links.appStore||'#';}
document.addEventListener('DOMContentLoaded',()=>{
  document.getElementById('langToggle').addEventListener('click',()=>{state.lang=state.lang==='ar'?'en':'ar';document.getElementById('langToggle').textContent=state.lang==='ar'?'EN':'ع';applyI18n();});
  document.getElementById('year').textContent=new Date().getFullYear();
  document.getElementById('contactForm').addEventListener('submit',e=>{e.preventDefault();document.getElementById('formStatus').textContent=state.lang==='ar'?'تم الإرسال (تجريبي) — اربط خدمة بريد لاحقاً.':'Sent (demo) — connect real email later.';e.target.reset();});
  applyI18n();initLinks();
});